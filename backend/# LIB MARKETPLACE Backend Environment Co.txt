# LIB MARKETPLACE Backend Environment Configuration

# Server Configuration
NODE_ENV=development
PORT=5000
FRONTEND_URL=http://localhost:3000

# Database Configuration
MONGODB_URI=mongodb://localhost:27017/lib-marketplace

# JWT Authentication
JWT_SECRET=your-super-secret-jwt-key-here-make-it-long-and-random
JWT_EXPIRES_IN=7d

# Email Configuration
EMAIL_USER=your-email@gmail.com
EMAIL_PASS=your-email-app-password

# File Upload Configuration
MAX_FILE_SIZE=5242880
UPLOAD_PATH=./uploads

# Security
BCRYPT_ROUNDS=12
RATE_LIMIT_WINDOW=15
RATE_LIMIT_MAX=100

# Cloudinary (for image uploads)
CLOUDINARY_CLOUD_NAME=your_cloud_name
CLOUDINARY_API_KEY=your_api_key
CLOUDINARY_API_SECRET=your_api_secret

# Complete Backend Setup and Run Script

Write-Host "üöÄ Setting up LIB MARKETPLACE Backend..." -ForegroundColor Green

# Check if we're in the correct directory
if (!(Test-Path "package.json")) {
    Write-Host "‚ùå package.json not found. Please run this script from the Backend directory." -ForegroundColor Red
    exit 1
}

# Install dependencies
Write-Host "üì¶ Installing dependencies..." -ForegroundColor Yellow
npm install

# Create .env file if it doesn't exist
if (!(Test-Path ".env")) {
    Write-Host "üìù Creating .env file..." -ForegroundColor Yellow
    Copy-Item ".env.example" ".env"
    Write-Host "‚ö†Ô∏è  Please update the .env file with your configurations!" -ForegroundColor Yellow
}

# Create logs directory
if (!(Test-Path "logs")) {
    New-Item -ItemType Directory -Path "logs" -Force
    Write-Host "‚úÖ Created logs directory" -ForegroundColor Green
}

# Create uploads directory
if (!(Test-Path "uploads")) {
    New-Item -ItemType Directory -Path "uploads" -Force
    New-Item -ItemType File -Path "uploads\.gitkeep" -Force
    Write-Host "‚úÖ Created uploads directory" -ForegroundColor Green
}

Write-Host "üéâ Backend setup completed successfully!" -ForegroundColor Green
Write-Host ""
Write-Host "üìã Next Steps:" -ForegroundColor Cyan
Write-Host "1. Update the .env file with your configurations" -ForegroundColor White
Write-Host "2. Make sure MongoDB is running" -ForegroundColor White
Write-Host "3. Run: npm run dev" -ForegroundColor White
Write-Host ""
Write-Host "üöÄ Starting development server..." -ForegroundColor Green
npm run dev